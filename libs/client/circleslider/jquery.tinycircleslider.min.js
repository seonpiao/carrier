/*! Tiny Circleslider - v2.0.6 - 2014-03-23
 * http://www.baijs.com/tinycircleslider
 *
 * Copyright (c) 2014 Maarten Baijs <wieringen@gmail.com>;
 * Licensed under the MIT license */

!function(a){"function"==typeof define&&define.amd?define(jQuery||["jquery"],a):"object"==typeof exports?a(jQuery||require("jquery")):a(jQuery)}(function(a){function b(b,e){function f(){return t.options.dotsSnap&&k(),u.append(v.first().clone()),u.css("width",A.width*(v.length+1)),g(),t.move(0,t.options.interval),t}function g(){var c=G?"touchstart":"mousedown";G?(b[0].ontouchstart=s,b[0].ontouchmove=p,b[0].ontouchend=r):w.bind(c,s),t.options.dotsSnap&&b.delegate(".dot",c,function(b){return b.preventDefault(),b.stopImmediatePropagation(),clearTimeout(D),0===F&&t.move(a(this).text()-1),t.start(),!1})}function h(a){D=setTimeout(function(){t.move(void 0!==v[t.slideCurrent+1]?t.slideCurrent+1:0,!0)},a?50:t.options.intervalTime)}function i(a){return a*(Math.PI/180)}function j(a){return 180*a/Math.PI}function k(){var c=document.createDocumentFragment();x.remove(),v=v.remove(),v.each(function(b,d){var e=x.clone(),f=t.options.dots?360*b/v.length:parseInt(a(d).attr("data-degrees"),10),g={top:-Math.cos(i(f))*t.options.radius+z.height/2-C.height/2,left:Math.sin(i(f))*t.options.radius+z.width/2-C.width/2};e.addClass(a(d).attr("data-classname")),e.css(g),y.push({angle:f,slide:d,dot:e}),c.appendChild(e[0])}),y.sort(function(a,b){return a.angle-b.angle}),a.each(y,function(b,c){a(c.dot).addClass("dot-"+(b+1)),a(c.dot).html("<span>"+(b+1)+"</span>"),u.append(c.slide)}),b.append(c),x=b.find(".dot")}function l(a,b){var c,d,e;return a>b?(c=a-b,d=-(b+360-a)):(c=a+360-b,d=-(b-a)),e=c<Math.abs(d)?c:d,[e,d,c]}function m(b){var c=9999,d=9999,e=9999,f=0,g=0,h=0;return a.each(y,function(a,i){var j=l(i.angle,b);Math.abs(j[0])<Math.abs(e)&&(e=j[0],h=a),Math.abs(j[1])<Math.abs(c)&&(c=j[1],f=a),Math.abs(j[2])<Math.abs(d)&&(d=j[2],g=a)}),[[h,f,g],[e,c,d]]}function n(a){return 0>a?360+a%-360:a%360}function o(a,b,c,d){F+=1;var e=n(Math.round(F*a+t.angleCurrent));F===c&&d&&t.start(),q(e,F===c),c>F?E=setTimeout(function(){o(a,b,c,d)},50):(F=0,t.angleCurrent=b)}function p(a){var c=b.offset(),d={left:a.pageX-c.left-z.width/2,top:a.pageY-c.top-z.height/2};return t.angleCurrent=n(j(Math.atan2(d.left,-d.top))),q(t.angleCurrent),!1}function q(a,c){t.options.dots?u.css("left",-(a/360*A.width*v.length)):(closestSlidesAndAngles=m(a),closestSlides=closestSlidesAndAngles[0],closestAngles=closestSlidesAndAngles[1],u.css("left",-(closestSlides[1]*A.width+Math.abs(closestAngles[1])*A.width/(Math.abs(closestAngles[1])+Math.abs(closestAngles[2]))))),w.css({top:-Math.cos(i(a))*t.options.radius+(z.height/2-B.height/2),left:Math.sin(i(a))*t.options.radius+(z.width/2-B.width/2)}),c&&b.trigger("move",[v[t.slideCurrent],t.slideCurrent])}function r(b){return a(b.target).hasClass("dot")?!1:(b.preventDefault(),clearTimeout(E),G||(a(document).unbind("mousemove mouseup"),w.unbind("mouseup")),t.options.dotsSnap&&(t.options.dotsHide&&x.stop(!0,!0).fadeOut("slow"),t.move(m(t.angleCurrent)[0][0])),t.start(),void 0)}function s(b){return b.preventDefault(),a(b.target).hasClass("dot")?!1:(clearTimeout(D),G||(a(document).mousemove(p),a(document).mouseup(r),w.mouseup(r)),t.options.dotsSnap&&t.options.dotsHide&&x.stop(!0,!0).fadeIn("slow"),void 0)}this.options=a.extend({},d,e),this._defaults=d,this._name=c;var t=this,u=(b.find(".viewport"),b.find(".overview")),v=u.children(),w=b.find(".thumb"),x=b.find(".dot"),y=(v.find("a"),[]),z={width:b.outerWidth(!0),height:b.outerHeight(!0)},A={width:v.first().outerWidth(!0),height:v.first().outerHeight(!0)},B={width:w.outerWidth(!0),height:w.outerHeight(!0)},C={width:x.outerWidth(),height:x.outerHeight()},D=null,E=null,F=0,G="ontouchstart"in document.documentElement;return this.slideCurrent=0,this.angleCurrent=10,this.start=function(a){return t.options.interval&&h(a),t},this.stop=function(){return clearTimeout(D),t},this.move=function(a,b){var c=y[a]&&y[a].angle||0,d=l(c,t.angleCurrent)[0],e=Math.ceil(Math.abs(d)/10),f=d/e||0;return t.slideCurrent=a,o(f,c,e,b),t},f()}var c="tinycircleslider",d={interval:!1,intervalTime:3500,dots:!0,dotsSnap:!1,dotsHide:!0,radius:140};a.fn[c]=function(d){return this.each(function(){a.data(this,"plugin_"+c)||a.data(this,"plugin_"+c,new b(a(this),d))})}});